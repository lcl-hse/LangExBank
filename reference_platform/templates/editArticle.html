{% extends "base.html" %}
{% block content %}
<div id="articleText" class="noDisplay">{% autoescape false %}{{ article.text }}{% endautoescape %}</div>
{% if message %}
<div><span class="errorMessage">{{ message }}</span></div>
{% endif %}
<form method="POST">
    <div>
    Enter article name: <textarea name="article_name" cols="80" rows="1">{{ article.name }}</textarea>
    <button class="btn btn-primary">Save article</button>
    </div>
    <br />
    <textarea id="articleEditor" name="article_text" cols="50" rows="30"></textarea>
    <br />
    <div id="selectedTags">
        {% for tag in article.tags %}
            <span id="{{ tag.shName }}">
                <input type="hidden" name="{{ tag.shName }}">
                <span class="tagLabel"> {{ tag.fName }} <span onclick="deleteGrandParent(this)">X</span></span> 
            </span>
        {% endfor %}
    </div>
</form>
<br />
Select error tags for this article:
{% autoescape false %}
<select id="tags">
    {% for tag in tags %}
    <option value="{{ tag.0 }}">{{ tag.1 }}</option>
    {% endfor %}
</select> <button class="btn btn-primary" onclick="addSpan()">+ Add tag</button>
{% endautoescape %}
{% endblock %}

{% block scripts %}
<script type="text/javascript" src="{{ url_for('static', filename='tinymce/js/tinymce/tinymce.min.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='article_editor.js') }}"></script>
<script>
    articleDiv = document.getElementById("articleText");
    articleHTML = articleDiv.innerHTML;
    addMCEWithContent("articleEditor", articleHTML);
</script>
{% endblock %}